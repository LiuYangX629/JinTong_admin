(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0f012d93"],{"0a49":function(t,e,a){var r=a("9b43"),n=a("626a"),i=a("4bf8"),o=a("9def"),s=a("cd1c");t.exports=function(t,e){var a=1==t,l=2==t,c=3==t,u=4==t,f=6==t,d=5==t||f,m=e||s;return function(e,s,p){for(var b,v,h=i(e),g=n(h),y=r(s,p,3),x=o(g.length),$=0,k=a?m(e,x):l?m(e,0):void 0;x>$;$++)if((d||$ in g)&&(b=g[$],v=y(b,$,h),t))if(a)k[$]=v;else if(v)switch(t){case 3:return!0;case 5:return b;case 6:return $;case 2:k.push(b)}else if(u)return!1;return f?-1:c||u?u:k}}},1169:function(t,e,a){var r=a("2d95");t.exports=Array.isArray||function(t){return"Array"==r(t)}},"2f21":function(t,e,a){"use strict";var r=a("79e5");t.exports=function(t,e){return!!t&&r(function(){e?t.call(null,function(){},1):t.call(null)})}},"55dd":function(t,e,a){"use strict";var r=a("5ca1"),n=a("d8e8"),i=a("4bf8"),o=a("79e5"),s=[].sort,l=[1,2,3];r(r.P+r.F*(o(function(){l.sort(void 0)})||!o(function(){l.sort(null)})||!a("2f21")(s)),"Array",{sort:function(t){return void 0===t?s.call(i(this)):s.call(i(this),n(t))}})},7514:function(t,e,a){"use strict";var r=a("5ca1"),n=a("0a49")(5),i="find",o=!0;i in[]&&Array(1)[i](function(){o=!1}),r(r.P+r.F*o,"Array",{find:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")(i)},7973:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",[a("el-breadcrumb",{attrs:{separator:"/"}},t._l(t.items,function(e,r){return a("el-breadcrumb-item",{key:r},[t._v(t._s(e))])}),1),a("el-divider")],1)},n=[],i={name:"BasicHeader",data:function(){return{}},props:{items:{type:Array,required:!0}},methods:{},mounted:function(){}},o=i,s=a("2877"),l=Object(s["a"])(o,r,n,!1,null,"39925274",null);e["a"]=l.exports},aa54:function(t,e,a){"use strict";var r=a("d097"),n=a.n(r);n.a},b406:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",[a("basic-header",{attrs:{items:["水司管理","分类管理"]}}),a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"分类查看",name:"list"}},[a("el-tree",{attrs:{data:t.data,"expand-on-click-node":!1},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"custom-tree-node"},[a("span",[t._v(t._s(e.node.label))]),a("span",{staticStyle:{float:"right"}},[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return t.edit(e.data.id)}}},[t._v("编辑")]),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return t.del(e)}}},[t._v("删除")])],1)])]}}])})],1),a("el-tab-pane",{attrs:{label:"分类添加",name:"add"}},[a("el-col",{attrs:{span:12}},[a("el-form",{ref:"addForm",attrs:{model:t.form2,"label-width":"80px",rules:t.rules2}},[a("el-form-item",{attrs:{label:"上级分类",prop:"pid"}},[a("el-select",{model:{value:t.form2.pid,callback:function(e){t.$set(t.form2,"pid",e)},expression:"form2.pid"}},[a("el-option",{attrs:{label:"无",value:0}}),t._l(t.data,function(t){return a("el-option",{key:t.id,attrs:{label:t.label,value:t.id}})})],2)],1),a("el-form-item",{attrs:{label:"分类名称",prop:"name"}},[a("el-input",{model:{value:t.form2.name,callback:function(e){t.$set(t.form2,"name",e)},expression:"form2.name"}})],1),a("el-form-item",{attrs:{label:"分类排序",prop:"sort"}},[a("el-input",{attrs:{type:"number"},model:{value:t.form2.sort,callback:function(e){t.$set(t.form2,"sort",e)},expression:"form2.sort"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.add}},[t._v("提交")])],1)],1)],1)],1)],1),a("el-dialog",{attrs:{title:"编辑",visible:t.dialogVisible,width:"50%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"myForm",attrs:{"label-width":"80",model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{label:"分类名称",prop:"name"}},[a("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"分类排序",prop:"sort"}},[a("el-input",{attrs:{type:"number"},model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort",e)},expression:"form.sort"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确定")])],1)],1)],1)},n=[],i=(a("7514"),a("55dd"),a("7f7f"),a("ac6a"),a("7973")),o={name:"CategoryManage",data:function(){return{activeName:"list",data:[],dialogVisible:!1,form:{name:"",sort:""},rules:{name:{required:!0,message:"请输入分类名称",trigger:"blur"},sort:{required:!0,message:"请输入分类排序",trigger:"blur"}},form2:{name:"",sort:"",pid:""},rules2:{name:{required:!0,message:"请输入分类名称",trigger:"blur"},sort:{required:!0,message:"请输入分类排序",trigger:"blur"},pid:{required:!0,message:"请选择上级分类",trigger:"change"}}}},methods:{fetchData:function(){var t=this;this.$axios.get(this.$api.CATEGORY).then(function(e){if(200===e.data.code){var a=e.data.data,r=[];a.forEach(function(t){if(0===t.pid){var e={};e.label=t.name,e.children=[],e.id=t.id,e.sort=t.sort,r.push(e)}else{var a={};a.label=t.name,a.id=t.id,a.sort=t.sort;var n=r.find(function(e){return e.id===t.pid});n.children.push(a)}}),r.sort(function(t,e){return t.sort<e.sort?1:-1}),t.data=r}})},del:function(t){var e=this,a="";a=1===t.node.level?"删除当前栏目后，该栏目的子栏目也会被删除，确定吗？":"删除当前栏目后，该栏目下的商品也会被删除，确定吗",this.$confirm(a,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$axios.delete(e.$api.CATEGORY,{id:t.data.id}).then(function(t){200===t.data.code&&(e.$message.success("删除成功"),e.fetchData())})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},edit:function(t){var e=this;this.$axios.get(this.$api.CATEGORY,{id:t}).then(function(t){200===t.data.code&&(e.form=t.data.data,e.dialogVisible=!0)})},submit:function(){var t=this;this.$refs.myForm.validate(function(e){if(!e)return!1;t.$axios.put(t.$api.CATEGORY,t.form).then(function(e){200===e.data.code&&(t.dialogVisible=!1,t.$message.success("修改成功"),t.fetchData())})})},add:function(){var t=this;this.$refs.addForm.validate(function(e){if(!e)return!1;t.$axios.post(t.$api.CATEGORY,t.form2).then(function(e){200===e.data.code&&(t.$message.success("添加成功"),t.activeName="list",t.fetchData())})})}},components:{"basic-header":i["a"]},mounted:function(){this.fetchData()}},s=o,l=(a("aa54"),a("2877")),c=Object(l["a"])(s,r,n,!1,null,"229ac71e",null);e["default"]=c.exports},cd1c:function(t,e,a){var r=a("e853");t.exports=function(t,e){return new(r(t))(e)}},d097:function(t,e,a){},e853:function(t,e,a){var r=a("d3f4"),n=a("1169"),i=a("2b4c")("species");t.exports=function(t){var e;return n(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!n(e.prototype)||(e=void 0),r(e)&&(e=e[i],null===e&&(e=void 0))),void 0===e?Array:e}}}]);
//# sourceMappingURL=chunk-0f012d93.814861ac.js.map