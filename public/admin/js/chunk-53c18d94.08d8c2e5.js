(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-53c18d94"],{"5c94":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("basic-header",{attrs:{items:["管理员管理","查看管理员"]}}),a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"查看管理员",name:"show"}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"请输入管理员姓名"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),a("el-form-item",[a("el-button",{attrs:{circle:"",type:"primary",icon:"el-icon-search"},on:{click:e.search}})],1)],1),a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{label:"id",prop:"id"}}),a("el-table-column",{attrs:{label:"用户名",prop:"username"}}),a("el-table-column",{attrs:{label:"类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[2===t.row.role?a("span",[e._v("普通管理员")]):e._e(),3===t.row.role?a("span",[e._v("店铺管理员")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"状态",prop:"state"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.state?a("div",[e._v("白名单")]):a("div",[e._v("黑名单")])]}}])}),a("el-table-column",{attrs:{label:"上次登录时间",prop:"last_login_time"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.del(t.row.id)}}},[e._v("删除")]),1===t.row.state?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.move(t.row.id,2)}}},[e._v("加入黑名单")]):a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.move(t.row.id,1)}}},[e._v("移出黑名单")])]}}])})],1),a("el-pagination",{staticStyle:{"margin-top":"30px"},attrs:{background:"",layout:"prev,pager,next","current-page":e.page,"page-size":e.pageSize,total:e.total},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"current-change":e.handleChange}})],1),a("el-tab-pane",{attrs:{label:"添加管理员",name:"add"}},[a("el-col",{attrs:{span:12}},[a("el-form",{ref:"addForm",attrs:{"label-width":"80px",model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:"姓名",prop:"username"}},[a("el-input",{model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("新增")])],1)],1)],1)],1),a("el-tab-pane",{attrs:{label:"添加店铺管理员",name:"add2"}},[a("el-col",{attrs:{span:12}},[a("el-form",{ref:"addForm2",attrs:{"label-width":"80px",model:e.form2,rules:e.rules2}},[a("el-form-item",{attrs:{label:"姓名",prop:"username"}},[a("el-input",{model:{value:e.form2.username,callback:function(t){e.$set(e.form2,"username",t)},expression:"form2.username"}})],1),a("el-form-item",{attrs:{label:"店铺",prop:"shopid"}},[a("el-select",{model:{value:e.form2.shopid,callback:function(t){e.$set(e.form2,"shopid",t)},expression:"form2.shopid"}},e._l(e.shop,function(e){return a("el-option",{key:e.value,attrs:{value:e.value}})}),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.add2}},[e._v("新增")])],1)],1)],1)],1)],1)],1)},n=[],o=(a("7f7f"),a("7973")),s={name:"ManagerShow",data:function(){return{activeName:"add",tableData:[],total:0,page:1,pageSize:5,value:"",form:{username:"",role:2},rules:{username:{required:!0,message:"请输入用户名",trigger:"blur"}},form2:{username:"",shopid:"",role:3},rules2:{username:{required:!0,message:"请输入用户名",trigger:"blur"},shopid:{required:!0,message:"请选择对应店铺",trigger:"change"}},shop:[]}},methods:{fetchData:function(){var e=this;this.$axios.get(this.$api.MANAGER,{role:2,page:this.page,pageSize:this.pageSize,search:this.value}).then(function(t){200===t.data.code&&(e.tableData=t.data.data,e.total=t.data.total)})},handleChange:function(){this.fetchData()},search:function(){this.page=1,this.fetchData()},del:function(e){var t=this;this.$confirm("此操作将永久删除该管理员, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$axios.delete(t.$api.MANAGER,{id:e}).then(function(e){200===e.data.code&&(t.$message.success("删除成功"),t.fetchData())})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},move:function(e,t){var a=this;this.$axios.put(this.$api.MANAGER,{id:e,state:t}).then(function(e){200===e.data.code&&(a.$message.success("修改成功"),a.fetchData())})},add:function(){var e=this;this.$refs.addForm.validate(function(t){if(!t)return!1;e.$axios.post(e.$api.MANAGER,e.form).then(function(t){200===t.data.code&&(e.$message.success("新增成功"),e.activeName="show",e.fetchData(),e.$refs.addForm.resetFields())})})},add2:function(){var e=this;this.$refs.addForm2.validate(function(t){if(!t)return!1;e.$axios.post(e.$api.MANAGER,e.form2).then(function(t){200===t.data.code&&(e.$message.success("新增成功"),e.activeName="show",e.fetchData(),e.$refs.addForm2.resetFields())})})},handleClick:function(e){var t=this;"add2"===this.activeName&&0===this.shop.length&&this.$axios.get(this.$api.SHOP,{state:2,quit:1}).then(function(e){if(200===e.data.code){var a=e.data.data;t.shop=a.map(function(e){return{value:e.id,label:e.name}})}})}},components:{"basic-header":o["a"]},mounted:function(){this.fetchData()}},l=s,i=a("2877"),c=Object(i["a"])(l,r,n,!1,null,"6583031c",null);t["default"]=c.exports},7973:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-breadcrumb",{attrs:{separator:"/"}},e._l(e.items,function(t,r){return a("el-breadcrumb-item",{key:r},[e._v(e._s(t))])}),1),a("el-divider")],1)},n=[],o={name:"BasicHeader",data:function(){return{}},props:{items:{type:Array,required:!0}},methods:{},mounted:function(){}},s=o,l=a("2877"),i=Object(l["a"])(s,r,n,!1,null,"39925274",null);t["a"]=i.exports}}]);
//# sourceMappingURL=chunk-53c18d94.08d8c2e5.js.map